webpackJsonp([0],{325:function(t,e,n){"use strict";(function(t){function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(55),c=o(a),p=n(56),l=o(p),u=n(0),h=o(u),f=n(57),d=o(f),m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},y=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),v=n(58),g=n(329),T=n(10),b=o(T),_=n(336),E=o(_),O=n(339),R=o(O),C=n(341),w=o(C),k=n(342),j=o(k),S=n(343),P=o(S),I=n(344),N=o(I),M=n(345),D=o(M),x={Main:{displayName:"Main"}},H=(0,d.default)({filename:"D:/work/projects/cnode-demo/app/components/Topic/Topic.js",components:x,locals:[t],imports:[h.default]}),A=(0,l.default)({filename:"D:/work/projects/cnode-demo/app/components/Topic/Topic.js",components:x,locals:[],imports:[h.default,c.default]}),L=function(t){return function(e){return H(A(e,t),t)}}("Main")(function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={topic:{data:n.props.topic.data,id:n.props.topic.id},replies:n.props.topic.data?n.props.topic.isReverseReplies?[].concat(n.props.topic.data.replies).reverse():n.props.topic.data.replies:[],replyOrderClass:n.props.topic.replyOrderClass,replyOrderHeight:n.props.topic.replyOrderHeight,isLoadFail:!1},n.orderBtnClass={early:"",new:""},n.setBeyondReplyClass=n.setBeyondReplyClass.bind(n),n.getReplyToTopHeight=n.getReplyToTopHeight.bind(n),n.loadData=n.loadData.bind(n),window.addEventListener("scroll",n.setBeyondReplyClass,!1),n}return s(e,t),y(e,[{key:"checkLink",value:function(t,e){if("A"===t.target.nodeName){if("@"===t.target.innerHTML.charAt(0)){var n=t.target.innerHTML.substr(1);t.target.setAttribute("href","https://cnodejs.org/user/"+n)}t.target.setAttribute("target","_blank")}}},{key:"getReplyToTopHeight",value:function(t){function e(t,e){if(t)return t.currentStyle?t.currentStyle[e]:getComputedStyle(t)[e]}var n=parseInt(e(this._topicTitle,"height")),o=parseInt(e(this._topicBack,"height")),r=parseInt(e(this._topicContent,"height")),i=parseInt(e(this._topicReplyHead,"height")),s=parseInt(e(this._topicReplyOrder,"height"));return t?s:n+o+r+i-s}},{key:"setBeyondReplyClass",value:function(){var t=this.getReplyToTopHeight("getReplyOrderHeight"),e=this.getReplyToTopHeight();if((document.documentElement.scrollTop||document.body.scrollTop)>e){if(this.state.replyOrderHeight)return;this.props.dispatch({type:"SET_TOPIC_REPLY_ORDER",payload:{replyOrderClass:" topic-reply-order-beyond",replyOrderHeight:t+"px"}}),this.setState({replyOrderClass:this.props.topic.replyOrderClass,replyOrderHeight:this.props.topic.replyOrderHeight})}else{if(!this.state.replyOrderHeight)return;this.props.dispatch({type:"SET_TOPIC_REPLY_ORDER",payload:{replyOrderClass:"",replyOrderHeight:0}}),this.setState({replyOrderClass:this.props.topic.replyOrderClass,replyOrderHeight:this.props.topic.replyOrderHeight})}}},{key:"createMarkup",value:function(t){return{__html:t}}},{key:"loadData",value:function(t,e){var n=this,o=JSON.parse(localStorage.getItem(this.props.login.localStorageKey)),r=o?"?accesstoken="+o.accessToken:"";(0,g.fetchJSON)({url:"/topic/"+(t+r),success:function(t){e?(n.props.dispatch({type:"SET_TOPIC_INIT",payload:{id:t.data.id,data:t.data,isReverseReplies:n.props.topic.isReverseReplies}}),n.setState({replies:n.props.topic.isReverseReplies?[].concat(n.props.topic.data.replies).reverse():n.props.topic.data.replies})):(n.props.dispatch({type:"SET_TOPIC_INIT",payload:{id:t.data.id,data:t.data,isReverseReplies:!1}}),n.setState({topic:{data:n.props.topic.data,id:n.props.topic.id},replies:n.props.topic.data.replies,isLoadFail:!1}))},fail:function(){n.setState({isLoadFail:!0})}})}},{key:"render",value:function(){function t(t,e){this.props.dispatch({type:"SET_REPLIES_IS_REVERSE",payload:{isReverseReplies:e}}),this.setState({replies:e?[].concat(t).reverse():t}),this.state.replyOrderHeight&&(document.documentElement.scrollTop=document.body.scrollTop=this.getReplyToTopHeight())}var e=this,n=localStorage.getItem(this.props.login.localStorageKey);return this.state.topic.data?h.default.createElement("div",null,h.default.createElement(v.Route,{path:"/topic/:id/replies",render:function(t){return h.default.createElement(R.default,m({},t,{loadTopic:e.loadData,replyCommentData:e.props.topic.replyComment}))}}),h.default.createElement(E.default,{_commonBack:function(t){return e._topicBack=t}},h.default.createElement(v.Link,{to:n?this.props.location.pathname+"/replies":"/login",className:"topic-reply-btn fright",onClick:function(t){t.stopPropagation()}},"回复")),h.default.createElement(w.default,m({},this.props,{_topicTitle:function(t){return e._topicTitle=t},getReplyToTopHeight:this.getReplyToTopHeight})),h.default.createElement(j.default,{_topicContent:function(t){return e._topicContent=t},checkLink:this.checkLink,createMarkup:this.createMarkup,data:this.props.topic.data,getReplyToTopHeight:this.getReplyToTopHeight}),h.default.createElement(P.default,{_topicReplyHead:function(t){return e._topicReplyHead=t},repliesLen:this.props.topic.data.replies.length,getReplyToTopHeight:this.getReplyToTopHeight}),h.default.createElement(N.default,m({},this.props,{replyOrderClass:this.state.replyOrderClass,_topicReplyOrder:function(t){return e._topicReplyOrder=t},getReplyToTopHeight:this.getReplyToTopHeight,setOrderTrue:function(){t.bind(e)(e.props.topic.data.replies,!0)},setOrderFalse:function(){t.bind(e)(e.props.topic.data.replies,!1)}})),h.default.createElement(D.default,m({},this.props,{replies:this.state.replies,replyOrderHeight:this.state.replyOrderHeight,checkLink:this.checkLink,createMarkup:this.createMarkup,loadTopic:this.loadData,setOrderTrue:function(){t.bind(e)(e.props.topic.data.replies,!0)},setOrderFalse:function(){t.bind(e)(e.props.topic.data.replies,!1)},isReverseReplies:this.props.topic.isReverseReplies}))):h.default.createElement(b.default,{isLoadFail:this.state.isLoadFail})}},{key:"componentDidMount",value:function(){var t=this.state.topic.id,e=this.props.match.params.id;document.documentElement.scrollTop=document.body.scrollTop=this.props.topic.scrollTop,this.state.topic.data&&t===e||(this.setState({topic:{data:null,id:""}}),this.loadData(e))}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"SET_TOPIC_SCROLL_TOP",payload:{scrollTop:document.documentElement.scrollTop||document.body.scrollTop}}),window.removeEventListener("scroll",this.setBeyondReplyClass,!1)}}]),e}(u.Component));e.default=L}).call(e,n(21)(t))},329:function(t,e,n){"use strict";function o(t){console.log(t)}function r(t){console.log("出错: \n",t)}function i(t){if(!t.ok)throw Error(t.statusText);return t}function s(t){return t.json()}function a(t){return t.text()}function c(t){console.log(t)}function p(t){var e=t.url,n=t.success,o=t.req,a=t.fail;fetch(h+e,o).then(i).then(s).then(n).catch(a||r)}function l(t){fetch(t).then(i).then(a).then(o).catch(r)}function u(){fetch.apply(void 0,arguments).then(i).then(c).catch(r)}Object.defineProperty(e,"__esModule",{value:!0});var h="https://cnodejs.org/api/v1";e.fetchJSON=p,e.fetchText=l,e.backResponse=u},330:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){function n(t,e){var n=void 0,o=["","?tab=good","?tab=share","?tab=ask","?tab=job","?tab=dev"];return"swiperight"===t?(n=o.indexOf(e),0===n?o[o.length-1]:o[n-1]):(n=o.indexOf(e),n===o.length-1?o[0]:o[n+1])}var o=new u.default(t);o.on("swipeleft",function(t){e.props.history.push("/"+n("swipeleft",location.search))}),o.on("swiperight",function(t){e.props.history.push("/"+n("swiperight",location.search))})}function i(t,e,n){var o=new u.default(t);switch(e){case"press":o.get(e).set({time:600});break;case"pinch":o.get(e).set({enable:!0})}o.on(e,function(t){n.isRefreshList=!0,n.props.history.push({pathname:"/",search:location.search}),document.onselectstart=function(){return!1},document.oncontextmenu=function(){return!1},console.log(e)})}function s(t,e,n){new u.default(t).on("swiperight",function(t){if(e)return e(n);history.go(-1)})}function a(t,e){new u.default(t).on("swipeleft",function(t){document.documentElement.scrollTop=document.body.scrollTop=e()})}function c(t,e,n){new u.default(t).on("swipeleft",function(t){f.default.getState().topic.isReverseReplies?n():e()})}function p(t){new u.default(t).on("doubletap",function(t){document.documentElement.scrollTop=document.body.scrollTop=0})}Object.defineProperty(e,"__esModule",{value:!0}),e.gestureReload=e.gestureToTop=e.gestureCommentOrder=e.gestureToComment=e.gestureBack=e.gestureToNextTag=void 0;var l=n(333),u=o(l),h=n(113),f=o(h);e.gestureToNextTag=r,e.gestureBack=s,e.gestureToComment=a,e.gestureCommentOrder=c,e.gestureToTop=p,e.gestureReload=i},331:function(t,e,n){"use strict";function o(t){switch(t.arrayFormat){case"index":return function(e,n,o){return null===n?[i(e,t),"[",o,"]"].join(""):[i(e,t),"[",i(o,t),"]=",i(n,t)].join("")};case"bracket":return function(e,n){return null===n?i(e,t):[i(e,t),"[]=",i(n,t)].join("")};default:return function(e,n){return null===n?i(e,t):[i(e,t),"=",i(n,t)].join("")}}}function r(t){var e;switch(t.arrayFormat){case"index":return function(t,n,o){if(e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),!e)return void(o[t]=n);void 0===o[t]&&(o[t]={}),o[t][e[1]]=n};case"bracket":return function(t,n,o){return e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0===o[t]?void(o[t]=[n]):void(o[t]=[].concat(o[t],n)):void(o[t]=n)};default:return function(t,e,n){if(void 0===n[t])return void(n[t]=e);n[t]=[].concat(n[t],e)}}}function i(t,e){return e.encode?e.strict?p(t):encodeURIComponent(t):t}function s(t){return Array.isArray(t)?t.sort():"object"==typeof t?s(Object.keys(t)).sort(function(t,e){return Number(t)-Number(e)}).map(function(e){return t[e]}):t}function a(t){var e=t.indexOf("?");return-1===e?"":t.slice(e+1)}function c(t,e){e=l({arrayFormat:"none"},e);var n=r(e),o=Object.create(null);return"string"!=typeof t?o:(t=t.trim().replace(/^[?#&]/,""))?(t.split("&").forEach(function(t){var e=t.replace(/\+/g," ").split("="),r=e.shift(),i=e.length>0?e.join("="):void 0;i=void 0===i?null:u(i),n(u(r),i,o)}),Object.keys(o).sort().reduce(function(t,e){var n=o[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=s(n):t[e]=n,t},Object.create(null))):o}var p=n(334),l=n(34),u=n(335);e.extract=a,e.parse=c,e.stringify=function(t,e){e=l({encode:!0,strict:!0,arrayFormat:"none"},e),!1===e.sort&&(e.sort=function(){});var n=o(e);return t?Object.keys(t).sort(e.sort).map(function(o){var r=t[o];if(void 0===r)return"";if(null===r)return i(o,e);if(Array.isArray(r)){var s=[];return r.slice().forEach(function(t){void 0!==t&&s.push(n(o,t,s.length))}),s.join("&")}return i(o,e)+"="+i(r,e)}).filter(function(t){return t.length>0}).join("&"):""},e.parseUrl=function(t,e){return{url:t.split("?")[0]||"",query:c(a(t),e)}}},333:function(t,e,n){var o;/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(r,i,s,a){"use strict";function c(t,e,n){return setTimeout(f(t,n),e)}function p(t,e,n){return!!Array.isArray(t)&&(l(t,n[e],n),!0)}function l(t,e,n){var o;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==a)for(o=0;o<t.length;)e.call(n,t[o],o,t),o++;else for(o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function u(t,e,n){var o="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=r.console&&(r.console.warn||r.console.log);return i&&i.call(r.console,o,n),t.apply(this,arguments)}}function h(t,e,n){var o,r=e.prototype;o=t.prototype=Object.create(r),o.constructor=t,o._super=r,n&&dt(o,n)}function f(t,e){return function(){return t.apply(e,arguments)}}function d(t,e){return typeof t==vt?t.apply(e?e[0]||a:a,e):t}function m(t,e){return t===a?e:t}function y(t,e,n){l(b(e),function(e){t.addEventListener(e,n,!1)})}function v(t,e,n){l(b(e),function(e){t.removeEventListener(e,n,!1)})}function g(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function T(t,e){return t.indexOf(e)>-1}function b(t){return t.trim().split(/\s+/g)}function _(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var o=0;o<t.length;){if(n&&t[o][n]==e||!n&&t[o]===e)return o;o++}return-1}function E(t){return Array.prototype.slice.call(t,0)}function O(t,e,n){for(var o=[],r=[],i=0;i<t.length;){var s=e?t[i][e]:t[i];_(r,s)<0&&o.push(t[i]),r[i]=s,i++}return n&&(o=e?o.sort(function(t,n){return t[e]>n[e]}):o.sort()),o}function R(t,e){for(var n,o,r=e[0].toUpperCase()+e.slice(1),i=0;i<mt.length;){if(n=mt[i],(o=n?n+r:e)in t)return o;i++}return a}function C(){return Ot++}function w(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}function k(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){d(t.options.enable,[t])&&n.handler(e)},this.init()}function j(t){var e=t.options.inputClass;return new(e||(wt?B:kt?q:Ct?V:z))(t,S)}function S(t,e,n){var o=n.pointers.length,r=n.changedPointers.length,i=e&St&&o-r==0,s=e&(It|Nt)&&o-r==0;n.isFirst=!!i,n.isFinal=!!s,i&&(t.session={}),n.eventType=e,P(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function P(t,e){var n=t.session,o=e.pointers,r=o.length;n.firstInput||(n.firstInput=M(e)),r>1&&!n.firstMultiple?n.firstMultiple=M(e):1===r&&(n.firstMultiple=!1);var i=n.firstInput,s=n.firstMultiple,a=s?s.center:i.center,c=e.center=D(o);e.timeStamp=bt(),e.deltaTime=e.timeStamp-i.timeStamp,e.angle=L(a,c),e.distance=A(a,c),I(n,e),e.offsetDirection=H(e.deltaX,e.deltaY);var p=x(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=p.x,e.overallVelocityY=p.y,e.overallVelocity=Tt(p.x)>Tt(p.y)?p.x:p.y,e.scale=s?Y(s.pointers,o):1,e.rotation=s?F(s.pointers,o):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,N(n,e);var l=t.element;g(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}function I(t,e){var n=e.center,o=t.offsetDelta||{},r=t.prevDelta||{},i=t.prevInput||{};e.eventType!==St&&i.eventType!==It||(r=t.prevDelta={x:i.deltaX||0,y:i.deltaY||0},o=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=r.x+(n.x-o.x),e.deltaY=r.y+(n.y-o.y)}function N(t,e){var n,o,r,i,s=t.lastInterval||e,c=e.timeStamp-s.timeStamp;if(e.eventType!=Nt&&(c>jt||s.velocity===a)){var p=e.deltaX-s.deltaX,l=e.deltaY-s.deltaY,u=x(c,p,l);o=u.x,r=u.y,n=Tt(u.x)>Tt(u.y)?u.x:u.y,i=H(p,l),t.lastInterval=e}else n=s.velocity,o=s.velocityX,r=s.velocityY,i=s.direction;e.velocity=n,e.velocityX=o,e.velocityY=r,e.direction=i}function M(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:gt(t.pointers[n].clientX),clientY:gt(t.pointers[n].clientY)},n++;return{timeStamp:bt(),pointers:e,center:D(e),deltaX:t.deltaX,deltaY:t.deltaY}}function D(t){var e=t.length;if(1===e)return{x:gt(t[0].clientX),y:gt(t[0].clientY)};for(var n=0,o=0,r=0;r<e;)n+=t[r].clientX,o+=t[r].clientY,r++;return{x:gt(n/e),y:gt(o/e)}}function x(t,e,n){return{x:e/t||0,y:n/t||0}}function H(t,e){return t===e?Mt:Tt(t)>=Tt(e)?t<0?Dt:xt:e<0?Ht:At}function A(t,e,n){n||(n=zt);var o=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(o*o+r*r)}function L(t,e,n){n||(n=zt);var o=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,o)/Math.PI}function F(t,e){return L(e[1],e[0],Bt)+L(t[1],t[0],Bt)}function Y(t,e){return A(e[0],e[1],Bt)/A(t[0],t[1],Bt)}function z(){this.evEl=Ut,this.evWin=qt,this.pressed=!1,k.apply(this,arguments)}function B(){this.evEl=Jt,this.evWin=Kt,k.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function X(){this.evTarget=Gt,this.evWin=Zt,this.started=!1,k.apply(this,arguments)}function U(t,e){var n=E(t.touches),o=E(t.changedTouches);return e&(It|Nt)&&(n=O(n.concat(o),"identifier",!0)),[n,o]}function q(){this.evTarget=te,this.targetIds={},k.apply(this,arguments)}function W(t,e){var n=E(t.touches),o=this.targetIds;if(e&(St|Pt)&&1===n.length)return o[n[0].identifier]=!0,[n,n];var r,i,s=E(t.changedTouches),a=[],c=this.target;if(i=n.filter(function(t){return g(t.target,c)}),e===St)for(r=0;r<i.length;)o[i[r].identifier]=!0,r++;for(r=0;r<s.length;)o[s[r].identifier]&&a.push(s[r]),e&(It|Nt)&&delete o[s[r].identifier],r++;return a.length?[O(i.concat(a),"identifier",!0),a]:void 0}function V(){k.apply(this,arguments);var t=f(this.handler,this);this.touch=new q(this.manager,t),this.mouse=new z(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function J(t,e){t&St?(this.primaryTouch=e.changedPointers[0].identifier,K.call(this,e)):t&(It|Nt)&&K.call(this,e)}function K(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var o=this.lastTouches,r=function(){var t=o.indexOf(n);t>-1&&o.splice(t,1)};setTimeout(r,ee)}}function $(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,o=0;o<this.lastTouches.length;o++){var r=this.lastTouches[o],i=Math.abs(e-r.x),s=Math.abs(n-r.y);if(i<=ne&&s<=ne)return!0}return!1}function G(t,e){this.manager=t,this.set(e)}function Z(t){if(T(t,ae))return ae;var e=T(t,ce),n=T(t,pe);return e&&n?ae:e||n?e?ce:pe:T(t,se)?se:ie}function Q(t){this.options=dt({},this.defaults,t||{}),this.id=C(),this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=ue,this.simultaneous={},this.requireFail=[]}function tt(t){return t&ye?"cancel":t&de?"end":t&fe?"move":t&he?"start":""}function et(t){return t==At?"down":t==Ht?"up":t==Dt?"left":t==xt?"right":""}function nt(t,e){var n=e.manager;return n?n.get(t):t}function ot(){Q.apply(this,arguments)}function rt(){ot.apply(this,arguments),this.pX=null,this.pY=null}function it(){ot.apply(this,arguments)}function st(){Q.apply(this,arguments),this._timer=null,this._input=null}function at(){ot.apply(this,arguments)}function ct(){ot.apply(this,arguments)}function pt(){Q.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function lt(t,e){return e=e||{},e.recognizers=m(e.recognizers,lt.defaults.preset),new ut(t,e)}function ut(t,e){this.options=dt({},lt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=j(this),this.touchAction=new G(this,this.options.touchAction),ht(this,!0),l(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ht(t,e){var n=t.element;if(n.style){var o;l(t.options.cssProps,function(r,i){o=R(n.style,i),e?(t.oldCssProps[o]=n.style[o],n.style[o]=r):n.style[o]=t.oldCssProps[o]||""}),e||(t.oldCssProps={})}}function ft(t,e){var n=i.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var dt,mt=["","webkit","Moz","MS","ms","o"],yt=i.createElement("div"),vt="function",gt=Math.round,Tt=Math.abs,bt=Date.now;dt="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var o=arguments[n];if(o!==a&&null!==o)for(var r in o)o.hasOwnProperty(r)&&(e[r]=o[r])}return e}:Object.assign;var _t=u(function(t,e,n){for(var o=Object.keys(e),r=0;r<o.length;)(!n||n&&t[o[r]]===a)&&(t[o[r]]=e[o[r]]),r++;return t},"extend","Use `assign`."),Et=u(function(t,e){return _t(t,e,!0)},"merge","Use `assign`."),Ot=1,Rt=/mobile|tablet|ip(ad|hone|od)|android/i,Ct="ontouchstart"in r,wt=R(r,"PointerEvent")!==a,kt=Ct&&Rt.test(navigator.userAgent),jt=25,St=1,Pt=2,It=4,Nt=8,Mt=1,Dt=2,xt=4,Ht=8,At=16,Lt=Dt|xt,Ft=Ht|At,Yt=Lt|Ft,zt=["x","y"],Bt=["clientX","clientY"];k.prototype={handler:function(){},init:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(w(this.element),this.evWin,this.domHandler)}};var Xt={mousedown:St,mousemove:Pt,mouseup:It},Ut="mousedown",qt="mousemove mouseup";h(z,k,{handler:function(t){var e=Xt[t.type];e&St&&0===t.button&&(this.pressed=!0),e&Pt&&1!==t.which&&(e=It),this.pressed&&(e&It&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Wt={pointerdown:St,pointermove:Pt,pointerup:It,pointercancel:Nt,pointerout:Nt},Vt={2:"touch",3:"pen",4:"mouse",5:"kinect"},Jt="pointerdown",Kt="pointermove pointerup pointercancel";r.MSPointerEvent&&!r.PointerEvent&&(Jt="MSPointerDown",Kt="MSPointerMove MSPointerUp MSPointerCancel"),h(B,k,{handler:function(t){var e=this.store,n=!1,o=t.type.toLowerCase().replace("ms",""),r=Wt[o],i=Vt[t.pointerType]||t.pointerType,s="touch"==i,a=_(e,t.pointerId,"pointerId");r&St&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):r&(It|Nt)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:i,srcEvent:t}),n&&e.splice(a,1))}});var $t={touchstart:St,touchmove:Pt,touchend:It,touchcancel:Nt},Gt="touchstart",Zt="touchstart touchmove touchend touchcancel";h(X,k,{handler:function(t){var e=$t[t.type];if(e===St&&(this.started=!0),this.started){var n=U.call(this,t,e);e&(It|Nt)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var Qt={touchstart:St,touchmove:Pt,touchend:It,touchcancel:Nt},te="touchstart touchmove touchend touchcancel";h(q,k,{handler:function(t){var e=Qt[t.type],n=W.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var ee=2500,ne=25;h(V,k,{handler:function(t,e,n){var o="touch"==n.pointerType,r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(o)J.call(this,e,n);else if(r&&$.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var oe=R(yt.style,"touchAction"),re=oe!==a,ie="auto",se="manipulation",ae="none",ce="pan-x",pe="pan-y",le=function(){if(!re)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||r.CSS.supports("touch-action",n)}),t}();G.prototype={set:function(t){"compute"==t&&(t=this.compute()),re&&this.manager.element.style&&le[t]&&(this.manager.element.style[oe]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return l(this.manager.recognizers,function(e){d(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Z(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var o=this.actions,r=T(o,ae)&&!le[ae],i=T(o,pe)&&!le[pe],s=T(o,ce)&&!le[ce];if(r){var a=1===t.pointers.length,c=t.distance<2,p=t.deltaTime<250;if(a&&c&&p)return}return s&&i?void 0:r||i&&n&Lt||s&&n&Ft?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var ue=1,he=2,fe=4,de=8,me=de,ye=16;Q.prototype={defaults:{},set:function(t){return dt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(p(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=nt(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return p(t,"dropRecognizeWith",this)?this:(t=nt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(p(t,"requireFailure",this))return this;var e=this.requireFail;return t=nt(t,this),-1===_(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(p(t,"dropRequireFailure",this))return this;t=nt(t,this);var e=_(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,o=this.state;o<de&&e(n.options.event+tt(o)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),o>=de&&e(n.options.event+tt(o))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|ue)))return!1;t++}return!0},recognize:function(t){var e=dt({},t);if(!d(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(me|ye|32)&&(this.state=ue),this.state=this.process(e),this.state&(he|fe|de|ye)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},h(ot,Q,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,o=e&(he|fe),r=this.attrTest(t);return o&&(n&Nt||!r)?e|ye:o||r?n&It?e|de:e&he?e|fe:he:32}}),h(rt,ot,{defaults:{event:"pan",threshold:10,pointers:1,direction:Yt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Lt&&e.push(pe),t&Ft&&e.push(ce),e},directionTest:function(t){var e=this.options,n=!0,o=t.distance,r=t.direction,i=t.deltaX,s=t.deltaY;return r&e.direction||(e.direction&Lt?(r=0===i?Mt:i<0?Dt:xt,n=i!=this.pX,o=Math.abs(t.deltaX)):(r=0===s?Mt:s<0?Ht:At,n=s!=this.pY,o=Math.abs(t.deltaY))),t.direction=r,n&&o>e.threshold&&r&e.direction},attrTest:function(t){return ot.prototype.attrTest.call(this,t)&&(this.state&he||!(this.state&he)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=et(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),h(it,ot,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ae]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&he)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),h(st,Q,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ie]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,o=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!o||!n||t.eventType&(It|Nt)&&!r)this.reset();else if(t.eventType&St)this.reset(),this._timer=c(function(){this.state=me,this.tryEmit()},e.time,this);else if(t.eventType&It)return me;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===me&&(t&&t.eventType&It?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=bt(),this.manager.emit(this.options.event,this._input)))}}),h(at,ot,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ae]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&he)}}),h(ct,ot,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Lt|Ft,pointers:1},getTouchAction:function(){return rt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Lt|Ft)?e=t.overallVelocity:n&Lt?e=t.overallVelocityX:n&Ft&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&Tt(e)>this.options.velocity&&t.eventType&It},emit:function(t){var e=et(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),h(pt,Q,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[se]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,o=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&St&&0===this.count)return this.failTimeout();if(o&&r&&n){if(t.eventType!=It)return this.failTimeout();var i=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||A(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,s&&i?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=c(function(){this.state=me,this.tryEmit()},e.interval,this),he):me}return 32},failTimeout:function(){return this._timer=c(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==me&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),lt.VERSION="2.0.7",lt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[at,{enable:!1}],[it,{enable:!1},["rotate"]],[ct,{direction:Lt}],[rt,{direction:Lt},["swipe"]],[pt],[pt,{event:"doubletap",taps:2},["tap"]],[st]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};ut.prototype={set:function(t){return dt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,o=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&me)&&(r=e.curRecognizer=null);for(var i=0;i<o.length;)n=o[i],2===e.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&n.state&(he|fe|de)&&(r=e.curRecognizer=n),i++}},get:function(t){if(t instanceof Q)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(p(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(p(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=_(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var n=this.handlers;return l(b(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==a){var n=this.handlers;return l(b(t),function(t){e?n[t]&&n[t].splice(_(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&ft(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var o=0;o<n.length;)n[o](e),o++}},destroy:function(){this.element&&ht(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},dt(lt,{INPUT_START:St,INPUT_MOVE:Pt,INPUT_END:It,INPUT_CANCEL:Nt,STATE_POSSIBLE:ue,STATE_BEGAN:he,STATE_CHANGED:fe,STATE_ENDED:de,STATE_RECOGNIZED:me,STATE_CANCELLED:ye,STATE_FAILED:32,DIRECTION_NONE:Mt,DIRECTION_LEFT:Dt,DIRECTION_RIGHT:xt,DIRECTION_UP:Ht,DIRECTION_DOWN:At,DIRECTION_HORIZONTAL:Lt,DIRECTION_VERTICAL:Ft,DIRECTION_ALL:Yt,Manager:ut,Input:k,TouchAction:G,TouchInput:q,MouseInput:z,PointerEventInput:B,TouchMouseInput:V,SingleTouchInput:X,Recognizer:Q,AttrRecognizer:ot,Tap:pt,Pan:rt,Swipe:ct,Pinch:it,Rotate:at,Press:st,on:y,off:v,each:l,merge:Et,extend:_t,assign:dt,inherit:h,bindFn:f,prefixed:R}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=lt,(o=function(){return lt}.call(e,n,e,t))!==a&&(t.exports=o)}(window,document)},334:function(t,e,n){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},335:function(t,e,n){"use strict";function o(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],o(n),o(r))}function r(t){try{return decodeURIComponent(t)}catch(r){for(var e=t.match(s),n=1;n<e.length;n++)t=o(e,n).join(""),e=t.match(s);return t}}function i(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},n=a.exec(t);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch(t){var o=r(n[0]);o!==n[0]&&(e[n[0]]=o)}n=a.exec(t)}e["%C2"]="�";for(var i=Object.keys(e),s=0;s<i.length;s++){var c=i[s];t=t.replace(new RegExp(c,"g"),e[c])}return t}var s=new RegExp("%[a-f0-9]{2}","gi"),a=new RegExp("(%[a-f0-9]{2})+","gi");t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return i(t)}}},336:function(t,e,n){"use strict";(function(t){function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(55),c=o(a),p=n(56),l=o(p),u=n(0),h=o(u),f=n(57),d=o(f),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),y={Main:{displayName:"Main"}},v=(0,d.default)({filename:"D:/work/projects/cnode-demo/app/components/common/back.js",components:y,locals:[t],imports:[h.default]}),g=(0,l.default)({filename:"D:/work/projects/cnode-demo/app/components/common/back.js",components:y,locals:[],imports:[h.default,c.default]}),T=function(t){return function(e){return v(g(e,t),t)}}("Main")(function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.goBack=n.goBack.bind(n),n}return s(e,t),m(e,[{key:"goBack",value:function(t){if(t.stopPropagation(),this.props.path)return this.props.history.push(this.props.path);history.go(-1)}},{key:"toTop",value:function(){document.documentElement.scrollTop=document.body.scrollTop=0}},{key:"render",value:function(){return h.default.createElement("div",{className:"common-back-container"},h.default.createElement("div",{className:"common-back hei clear "+(this.props.additionalClass||""),onClick:this.toTop,ref:this.props._commonBack},h.default.createElement("span",{className:"common-back-btn common-back-icon-font",onClick:this.goBack},""),this.props.children),h.default.createElement("div",{className:"hei"}))}}]),e}(u.Component));e.default=T}).call(e,n(21)(t))},339:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=(o(r),n(11)),s=o(i),a=n(8),c=n(10),p=o(c),l=(0,s.default)({loader:function(){return n.e(5).then(n.bind(null,340))},loading:p.default}),u=function(t){return{localStorageKey:t.login.localStorageKey}},h=function(t){return{dispatch:function(e){t(e)}}};e.default=(0,a.connect)(u,h)(l)},341:function(t,e,n){"use strict";(function(t){function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(55),c=o(a),p=n(56),l=o(p),u=n(0),h=o(u),f=n(57),d=o(f),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),y=n(329),v=n(330),g={Detail:{displayName:"Detail"}},T=(0,d.default)({filename:"D:/work/projects/cnode-demo/app/components/Topic/Detail.js",components:g,locals:[t],imports:[h.default]}),b=(0,l.default)({filename:"D:/work/projects/cnode-demo/app/components/Topic/Detail.js",components:g,locals:[],imports:[h.default,c.default]}),_=function(t){return function(e){return T(b(e,t),t)}}("Detail")(function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={isCollect:n.props.topic.data.is_collect},n.setCollect=n.setCollect.bind(n),n}return s(e,t),m(e,[{key:"setCollect",value:function(){var t=this,e=JSON.parse(localStorage.getItem(this.props.login.localStorageKey));if(e){var o=e.accessToken,r=n(331),i=r.stringify({accesstoken:o,topic_id:this.props.match.params.id});(0,y.fetchJSON)({url:this.state.isCollect?"/topic_collect/de_collect":"/topic_collect/collect",req:{method:"post",body:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}},success:function(e){t.setState({isCollect:!t.state.isCollect}),t.props.dispatch({type:"SET_TOPIC_IS_COLLECT",payload:t.state.isCollect})}})}else this.props.history.push("/login")}},{key:"render",value:function(){var t=this,e=JSON.parse(localStorage.getItem(this.props.login.localStorageKey));return h.default.createElement("div",{className:"topic-title",ref:function(e){t.props._topicTitle(e),t._topicTitle=e}},h.default.createElement("h3",null,this.props.topic.data.title),h.default.createElement("div",{className:"topic-detail clear"},h.default.createElement("span",null,"回复：",this.props.topic.data.reply_count?h.default.createElement("a",{className:"active",onClick:function(){document.documentElement.scrollTop=document.body.scrollTop=t.props.getReplyToTopHeight()}},this.props.topic.data.reply_count):this.props.topic.data.reply_count),h.default.createElement("span",null,"阅读：",this.props.topic.data.visit_count),e?h.default.createElement("a",{className:"active fright",onClick:this.setCollect},this.state.isCollect?"已收藏":"收藏"):null,h.default.createElement("span",{className:"fright"},this.props.getDuration(this.props.topic.data.create_at)),h.default.createElement("span",{className:"fright"},this.props.topic.data.author.loginname)))}},{key:"componentDidMount",value:function(){(0,v.gestureBack)(this._topicTitle),(0,v.gestureToComment)(this._topicTitle,this.props.getReplyToTopHeight)}}]),e}(u.Component));e.default=_}).call(e,n(21)(t))},342:function(t,e,n){"use strict";(function(t){function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(55),c=o(a),p=n(56),l=o(p),u=n(0),h=o(u),f=n(57),d=o(f),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),y=n(330),v={Content:{displayName:"Content"}},g=(0,d.default)({filename:"D:/work/projects/cnode-demo/app/components/Topic/Content.js",components:v,locals:[t],imports:[h.default]}),T=(0,l.default)({filename:"D:/work/projects/cnode-demo/app/components/Topic/Content.js",components:v,locals:[],imports:[h.default,c.default]}),b=function(t){return function(e){return g(T(e,t),t)}}("Content")(function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),m(e,[{key:"render",value:function(){var t=this;return h.default.createElement("div",{className:"topic-content",ref:function(e){t.props._topicContent(e),t._topicContent=e},onMouseOver:function(e){t.props.checkLink(e)},dangerouslySetInnerHTML:this.props.createMarkup(this.props.data.content)})}},{key:"componentDidMount",value:function(){(0,y.gestureBack)(this._topicContent),(0,y.gestureToComment)(this._topicContent,this.props.getReplyToTopHeight),(0,y.gestureToTop)(this._topicContent)}}]),e}(u.Component));e.default=b}).call(e,n(21)(t))},343:function(t,e,n){"use strict";(function(t){function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(55),c=o(a),p=n(56),l=o(p),u=n(0),h=o(u),f=n(57),d=o(f),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),y=n(330),v={ReplyHead:{displayName:"ReplyHead"}},g=(0,d.default)({filename:"D:/work/projects/cnode-demo/app/components/Topic/ReplyHead.js",components:v,locals:[t],imports:[h.default]}),T=(0,l.default)({filename:"D:/work/projects/cnode-demo/app/components/Topic/ReplyHead.js",components:v,locals:[],imports:[h.default,c.default]}),b=function(t){return function(e){return g(T(e,t),t)}}("ReplyHead")(function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),m(e,[{key:"render",value:function(){var t=this;return h.default.createElement("div",{className:"topic-reply-head",ref:function(e){t.props._topicReplyHead(e),t._topicReplyHead=e}},h.default.createElement("span",{className:"topic-reply-outer"},this.props.repliesLen," 回复"))}},{key:"componentDidMount",value:function(){(0,y.gestureBack)(this._topicReplyHead),(0,y.gestureToComment)(this._topicReplyHead,this.props.getReplyToTopHeight),(0,y.gestureToTop)(this._topicReplyHead)}}]),e}(u.Component));e.default=b}).call(e,n(21)(t))},344:function(t,e,n){"use strict";(function(t){function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(55),c=o(a),p=n(56),l=o(p),u=n(0),h=o(u),f=n(57),d=o(f),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),y=n(330),v={ReplyOrder:{displayName:"ReplyOrder"}},g=(0,d.default)({filename:"D:/work/projects/cnode-demo/app/components/Topic/ReplyOrder.js",components:v,locals:[t],imports:[h.default]}),T=(0,l.default)({filename:"D:/work/projects/cnode-demo/app/components/Topic/ReplyOrder.js",components:v,locals:[],imports:[h.default,c.default]}),b=function(t){return function(e){return g(T(e,t),t)}}("ReplyOrder")(function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),m(e,[{key:"render",value:function(){var t=this;return this.orderBtnClass={early:this.props.topic.isReverseReplies?"":" active",new:this.props.topic.isReverseReplies?" active":""},h.default.createElement("div",{className:"topic-reply-order clear"+this.props.replyOrderClass,ref:function(e){t.props._topicReplyOrder(e),t._topicReplyOrder=e},style:{display:this.props.topic.data.replies.length?"":"none"}},h.default.createElement("span",{className:"topic-reply-order-btn fright"+this.orderBtnClass.new,onClick:this.props.setOrderTrue},"最新"),h.default.createElement("span",{className:"topic-reply-order-btn fright"+this.orderBtnClass.early,onClick:this.props.setOrderFalse},"最早"))}},{key:"componentDidMount",value:function(){(0,y.gestureBack)(this._topicReplyOrder),(0,y.gestureToComment)(this._topicReplyOrder,this.props.getReplyToTopHeight),(0,y.gestureToTop)(this._topicReplyOrder)}}]),e}(u.Component));e.default=b}).call(e,n(21)(t))},345:function(t,e,n){"use strict";(function(t){function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(55),c=o(a),p=n(56),l=o(p),u=n(0),h=o(u),f=n(57),d=o(f),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),y=n(58),v=n(329),g=n(330),T={Replies:{displayName:"Replies"}},b=(0,d.default)({filename:"D:/work/projects/cnode-demo/app/components/Topic/Replies.js",components:T,locals:[t],imports:[h.default]}),_=(0,l.default)({filename:"D:/work/projects/cnode-demo/app/components/Topic/Replies.js",components:T,locals:[],imports:[h.default,c.default]}),E=function(t){return function(e){return b(_(e,t),t)}}("Replies")(function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.setUps=n.setUps.bind(n),n}return s(e,t),m(e,[{key:"setReplyComment",value:function(t){this.props.dispatch({type:"SET_REPLY_COMMENT",payload:{reply_id:t.id,author:t.author.loginname}})}},{key:"setUps",value:function(t){var e=this,n=JSON.parse(localStorage.getItem(this.props.login.localStorageKey));n?(0,v.fetchJSON)({url:"/reply/"+t+"/ups",req:{method:"post",body:"accesstoken="+n.accessToken,headers:{"Content-Type":"application/x-www-form-urlencoded"}},success:function(n){for(var o="up"===n.action,r=e.props.topic.isReverseReplies,i=0;i<e.props.replies.length;i++)if(e.props.replies[i].id===t){e.props.replies[i].is_uped=o,o?e.props.replies[i].ups.push("tem_token"):e.props.replies[i].ups.pop(),e.props.dispatch({type:"SET_TOPIC_REPLIES",payload:r?[].concat(e.props.replies).reverse():e.props.replies});break}}}):this.props.history.push("/login")}},{key:"render",value:function(){var t=this,e=localStorage.getItem(this.props.login.localStorageKey);return h.default.createElement("div",null,this.props.replies?h.default.createElement("ul",{className:"topic-reply-list",ref:function(e){return t._topicReplyList=e},style:{marginTop:this.props.replyOrderHeight}},this.props.replies.map(function(n,o){var r=void 0,i=void 0;return n.author.loginname===t.props.topic.data.author.loginname?(i="作者",r="topic-reply-num-active"):(i=t.props.topic.isReverseReplies?t.props.replies.length-o+"楼":o+1+"楼",r="topic-reply-num"),h.default.createElement("li",{key:n.id},h.default.createElement("span",{className:"topic-reply-avatar"},h.default.createElement("img",{src:n.author.avatar_url})),h.default.createElement("div",{className:"topic-reply-box"},h.default.createElement("div",{className:"topic-reply-detail clear"},h.default.createElement("a",{href:"https://cnodejs.org/user/"+n.author.loginname,target:"_blank",className:"topic-reply-username"},n.author.loginname),h.default.createElement("span",{className:"topic-reply-duration"},t.props.getDuration(n.create_at)),h.default.createElement("span",{className:r},i),h.default.createElement("span",{className:"topic-reply-up fright"+(n.ups.length?n.is_uped?" topic-reply-up-ownActive":" topic-reply-up-active":""),onClick:function(){t.setUps(n.id)}},h.default.createElement("span",{className:"topic-reply-upIcon"},""),n.ups.length)),h.default.createElement("div",{className:"topic-reply-content topic-content",onMouseOver:function(e){t.props.checkLink(e,t.props.topic.data.id)},dangerouslySetInnerHTML:t.props.createMarkup(n.content)}),h.default.createElement("div",null,h.default.createElement(y.Link,{to:e?t.props.location.pathname+"/replies":"/login",className:"topic-reply-reply fright",onClick:function(){t.setReplyComment(n)}},""))))})):null)}},{key:"componentDidMount",value:function(){(0,g.gestureBack)(this._topicReplyList),(0,g.gestureToTop)(this._topicReplyList),(0,g.gestureCommentOrder)(this._topicReplyList,this.props.setOrderTrue,this.props.setOrderFalse)}}]),e}(u.Component));e.default=E}).call(e,n(21)(t))}});