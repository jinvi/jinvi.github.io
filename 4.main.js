webpackJsonp([4],{326:function(e,t,n){"use strict";(function(e){function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(55),l=o(i),s=n(56),u=o(s),f=n(0),p=o(f),d=n(57),m=o(d),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),b=n(328),y=n(333),v=o(y),g={Main:{displayName:"Main"}},k=(0,m.default)({filename:"D:/work/projects/cnode-demo/app/components/Login/Login.js",components:g,locals:[e],imports:[p.default]}),_=(0,u.default)({filename:"D:/work/projects/cnode-demo/app/components/Login/Login.js",components:g,locals:[],imports:[p.default,l.default]}),E=function(e){return function(t){return k(_(t,e),e)}}("Main")(function(e){function t(e){a(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isActive:""},n.sendLoginReq=n.sendLoginReq.bind(n),n}return r(t,e),h(t,[{key:"setActiveClass",value:function(e){this.setState({isActive:e})}},{key:"sendLoginReq",value:function(e){var t=this;e.preventDefault();var n=new FormData(document.querySelector("form")),o=n.get("accesstoken");(0,b.fetchJSON)({url:"/accesstoken",req:{method:"post",body:"accesstoken="+o,headers:{"Content-Type":"application/x-www-form-urlencoded"}},success:function(e){var n={accessToken:o,loginName:e.loginname,id:e.id,avatar_url:e.avatar_url};t.props.dispatch({type:"SET_LOGIN_SUCCESS",payload:!0}),localStorage.setItem(t.props.localStorageKey,JSON.stringify(n)),history.back(-1)},fail:function(e){alert("登录失败，请重新尝试。")}})}},{key:"render",value:function(){var e=this;return p.default.createElement("div",null,p.default.createElement(v.default,null),p.default.createElement("div",{className:"login-container"},p.default.createElement("div",{className:"login"},p.default.createElement("div",{className:"login-title"},"用户登录"),p.default.createElement("div",{className:"login-title-decoration"}),p.default.createElement("form",null,p.default.createElement("div",null,p.default.createElement("input",{className:"login-text"+this.state.isActive,placeholder:"Access Token",type:"text",onFocus:function(){e.setActiveClass(" active")},onBlur:function(){e.setActiveClass("")},name:"accesstoken"})),p.default.createElement("button",{className:"login-btn",onClick:this.sendLoginReq},"登录")),p.default.createElement("div",{className:"login-detail"},p.default.createElement("span",{className:"login-detail-icon"},""),"Access Token在",p.default.createElement("a",{href:"https://cnodejs.org/setting",target:"_blank"},"设置"),"页面"))))}}]),t}(f.Component));t.default=E}).call(t,n(21)(e))},328:function(e,t,n){"use strict";function o(e){console.log(e)}function a(e){console.log("出错: \n",e)}function c(e){if(!e.ok)throw Error(e.statusText);return e}function r(e){return e.json()}function i(e){return e.text()}function l(e){console.log(e)}function s(e){var t=e.url,n=e.success,o=e.req,i=e.fail;fetch(p+t,o).then(c).then(r).then(n).catch(i||a)}function u(e){fetch(e).then(c).then(i).then(o).catch(a)}function f(){fetch.apply(void 0,arguments).then(c).then(l).catch(a)}Object.defineProperty(t,"__esModule",{value:!0});var p="https://cnodejs.org/api/v1";t.fetchJSON=s,t.fetchText=u,t.backResponse=f},333:function(e,t,n){"use strict";(function(e){function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(55),l=o(i),s=n(56),u=o(s),f=n(0),p=o(f),d=n(57),m=o(d),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),b={Main:{displayName:"Main"}},y=(0,m.default)({filename:"D:/work/projects/cnode-demo/app/components/common/back.js",components:b,locals:[e],imports:[p.default]}),v=(0,u.default)({filename:"D:/work/projects/cnode-demo/app/components/common/back.js",components:b,locals:[],imports:[p.default,l.default]}),g=function(e){return function(t){return y(v(t,e),e)}}("Main")(function(e){function t(e){a(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.goBack=n.goBack.bind(n),n}return r(t,e),h(t,[{key:"goBack",value:function(e){if(e.stopPropagation(),this.props.path)return this.props.history.push(this.props.path);history.go(-1)}},{key:"toTop",value:function(){document.documentElement.scrollTop=document.body.scrollTop=0}},{key:"render",value:function(){return p.default.createElement("div",{className:"common-back-container"},p.default.createElement("div",{className:"common-back hei clear "+(this.props.additionalClass||""),onClick:this.toTop,ref:this.props._commonBack},p.default.createElement("span",{className:"common-back-btn common-back-icon-font",onClick:this.goBack},""),this.props.children),p.default.createElement("div",{className:"hei"}))}}]),t}(f.Component));t.default=g}).call(t,n(21)(e))}});